<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="700.0" prefWidth="1000.0" stylesheets="@menu.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Contollers.MenuController">

    <!-- ============ TOP SECTION ============ -->
    <top>
        <VBox>
            <MenuBar styleClass="menu-bar">
                <Menu text="Fichier">
                    <MenuItem onAction="#handleLogout" text="DÃ©connexion" />
                    <MenuItem text="Quitter" />
                </Menu>
            </MenuBar>

            <HBox styleClass="top-bar">
                <Label styleClass="header-title" text="ðŸ‹SYSTÃˆME DE GESTION DE SALLE DE GYM" />
            </HBox>
        </VBox>
    </top>

    <!-- ============ CENTER : ALL TABS ============ -->
    <center>
        <TabPane fx:id="mainTabPane" styleClass="tab-pane" tabClosingPolicy="UNAVAILABLE">

            <!-- ============ TAB MEMBRES ============ -->
            <Tab text="ðŸ‘¥ Membres">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des Membres" />

                    <GridPane hgap="10" vgap="10">
                        <TextField fx:id="membreNomField" promptText="Nom" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <TextField fx:id="membrePrenomField" promptText="PrÃ©nom" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <TextField fx:id="membreEmailField" promptText="Email" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <TextField fx:id="membreTelField" promptText="TÃ©lÃ©phone" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                  <columnConstraints>
                     <ColumnConstraints />
                     <ColumnConstraints />
                  </columnConstraints>
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>

                    <HBox spacing="10">
                        <Button onAction="#handleAjouterMembre" styleClass="btn-green" text="âž• Ajouter" />
                        <Button onAction="#handleSupprimerMembre" styleClass="btn-red" text="ðŸ—‘ Supprimer" />
                        <Button onAction="#handleAfficherMembresActifs" text="Membres Actifs" />
                        <Button onAction="#handleAfficherMembres" text="Afficher Membres" />
                    </HBox>

                    <TableView fx:id="membresTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="membreIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="membreNomCol" prefWidth="250" text="Nom Complet" />
                            <TableColumn fx:id="membreEmailCol" prefWidth="250" text="Email" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB COACHS ============ -->
            <Tab text="ðŸƒ Coachs">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des Coachs" />

                    <GridPane hgap="10" vgap="10">
                        <TextField fx:id="coachNomField" promptText="Nom" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <TextField fx:id="coachPrenomField" promptText="PrÃ©nom" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <TextField fx:id="coachEmailField" promptText="Email" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <TextField fx:id="coachTelField" promptText="TÃ©lÃ©phone" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <TextField fx:id="coachSpecialiteField" promptText="SpÃ©cialitÃ©" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <TextField fx:id="coachTarifField" promptText="Tarif horaire" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                  <columnConstraints>
                     <ColumnConstraints />
                     <ColumnConstraints />
                  </columnConstraints>
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>

                    <HBox spacing="10">
                        <Button onAction="#handleAjouterCoach" styleClass="btn-green" text="âž• Ajouter" />
                        <Button onAction="#handleSupprimerCoach" styleClass="btn-red" text="ðŸ—‘ Supprimer" />
                    </HBox>

                    <TableView fx:id="coachsTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="coachIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="coachNomCol" prefWidth="400" text="Nom Complet" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB MANAGERS ============ -->
            <Tab text="ðŸ’¼ Managers">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des Managers" />

                    <GridPane hgap="10" vgap="10">
                        <TextField fx:id="managerNomField" promptText="Nom" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <TextField fx:id="managerPrenomField" promptText="PrÃ©nom" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <TextField fx:id="managerEmailField" promptText="Email" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <TextField fx:id="managerTelField" promptText="TÃ©lÃ©phone" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <TextField fx:id="managerLoginField" promptText="Login" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <PasswordField fx:id="managerPasswordField" promptText="Mot de passe" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                  <columnConstraints>
                     <ColumnConstraints />
                     <ColumnConstraints />
                  </columnConstraints>
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>

                    <HBox spacing="10">
                        <Button onAction="#handleAjouterManager" styleClass="btn-green" text="âž• Ajouter" />
                        <Button onAction="#handleSupprimerManager" styleClass="btn-red" text="ðŸ—‘ Supprimer" />
                    </HBox>

                    <TableView fx:id="managersTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="managerIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="managerNomCol" prefWidth="400" text="Nom Complet" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB SALLES ============ -->
            <Tab text="ðŸ¢ Salles">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des Salles" />

                    <HBox spacing="10">
                        <TextField fx:id="nomSalleField" prefWidth="200" promptText="Nom de la salle" />
                        <TextField fx:id="capaciteSalleField" prefWidth="100" promptText="CapacitÃ©" />
                        <Button onAction="#handleCreerSalle" styleClass="btn-green" text="âž• CrÃ©er" />
                        <Button onAction="#handleSupprimerSalle" styleClass="btn-red" text="ðŸ—‘ Supprimer" />
                    </HBox>

                    <TableView fx:id="sallesTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="salleIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="salleNomCol" prefWidth="300" text="Nom" />
                            <TableColumn fx:id="salleCapaciteCol" prefWidth="150" text="CapacitÃ©" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB Ã‰QUIPEMENTS ============ -->
            <Tab text="ðŸ”§ Ã‰quipements">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des Ã‰quipements" />

                    <HBox spacing="10">
                        <TextField fx:id="nomEquipField" prefWidth="200" promptText="Nom Ã©quipement" />
                        <ComboBox fx:id="etatEquipComboBox" prefWidth="150" promptText="Ã‰tat" />
                        <Button onAction="#handleAjouterEquipement" styleClass="btn-green" text="âž• Ajouter" />
                        <Button onAction="#handleSupprimerEquipement" styleClass="btn-red" text="ðŸ—‘ Supprimer" />
                        <Button onAction="#handleAfficherEquipementsFonctionnels" text="Ã‰quipements Fonctionnels" />
                        <Button onAction="#handleAfficherEquipements" text="Afficher Ã‰quipements" />
                    </HBox>

                    <HBox spacing="10">
                        <Label text="Affecter Ã  une salle:" />
                        <ComboBox fx:id="equipSalleComboBox" prefWidth="150" promptText="SÃ©lectionner salle" />
                        <Button onAction="#handleAffecterEquipementSalle" styleClass="btn-blue" text="âœ“ Affecter" />
                    </HBox>

                    <TableView fx:id="equipementsTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="equipIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="equipNomCol" prefWidth="250" text="Nom" />
                            <TableColumn fx:id="equipEtatCol" prefWidth="150" text="Ã‰tat" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB ABONNEMENTS ============ -->
            <Tab text="ðŸ’³ Abonnements">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des Abonnements" />

                    <HBox spacing="10">
                        <ComboBox fx:id="membreAbonnementComboBox" prefWidth="200" promptText="Membre" />
                        <ComboBox fx:id="typeAbonnementComboBox" prefWidth="200" promptText="Type" />
                        <Label fx:id="prixAbonnementLabel" styleClass="section-subtitle" text="Prix: --" />
                        <Button onAction="#handleCreerAbonnement" styleClass="btn-green" text="âž• CrÃ©er" />
                        <Button onAction="#handleAfficherAbonnements" styleClass="btn-blue" text="ðŸ“‹ Afficher" />
                    </HBox>

                    <TableView fx:id="abonnementsTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="aboMembreCol" prefWidth="200" text="Membre" />
                            <TableColumn fx:id="aboTypeCol" prefWidth="120" text="Type" />
                            <TableColumn fx:id="aboDebutCol" prefWidth="120" text="DÃ©but" />
                            <TableColumn fx:id="aboFinCol" prefWidth="120" text="Fin" />
                            <TableColumn fx:id="aboValideCol" prefWidth="100" text="Valide" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB PAIEMENTS ============ -->
            <Tab text="ðŸ’° Paiements">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des Paiements" />

                    <HBox spacing="10">
                        <ComboBox fx:id="membrePaiementComboBox" prefWidth="200" promptText="Membre" />
                        <ComboBox fx:id="typePaiementComboBox" prefWidth="150" promptText="Type" />
                        <TextField fx:id="montantPaiementField" prefWidth="120" promptText="Montant (DT)" />
                        <Button onAction="#handleEffectuerPaiement" styleClass="btn-green" text="ðŸ’³ Effectuer" />
                        <Button onAction="#handleAfficherPaiements" styleClass="btn-info" text="ðŸ”„ Afficher Paiements" />
                    </HBox>

                    <TableView fx:id="paiementsTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="paiementIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="paiementMembreCol" prefWidth="200" text="Membre" />
                            <TableColumn fx:id="paiementTypeCol" prefWidth="150" text="Type" />
                            <TableColumn fx:id="paiementMontantCol" prefWidth="120" text="Montant" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB SÃ‰ANCES ============ -->
            <Tab text="ðŸ‹ SÃ©ances">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des SÃ©ances" />

                    <GridPane hgap="10" vgap="10">
                        <ComboBox fx:id="typeSeanceComboBox" promptText="Type" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <ComboBox fx:id="salleSeanceComboBox" promptText="Salle" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <ComboBox fx:id="coachSeanceComboBox" promptText="Coach" GridPane.rowIndex="1" />
                        <ComboBox fx:id="membreSeanceComboBox" promptText="Membre" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <TextField fx:id="dateSeanceField" promptText="Date (jj/mm/aaaa)" GridPane.rowIndex="2" />
                        <TextField fx:id="dureeSeanceField" promptText="DurÃ©e (heures)" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        <TextField fx:id="coutSeanceField" promptText="CoÃ»t (DT)" GridPane.rowIndex="3" />
                        <TextField fx:id="capaciteSeanceField" promptText="CapacitÃ©" GridPane.columnIndex="1" GridPane.rowIndex="3" />
   
                          <Button onAction="#handleCreerSeance" styleClass="btn-green" text="âž• CrÃ©er SÃ©ance" GridPane.columnIndex="2" />
                       <Button onAction="#handleAfficherSeances" text="Afficher SÃ©ances" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                  <columnConstraints>
                     <ColumnConstraints />
                     <ColumnConstraints />
                     <ColumnConstraints />
                  </columnConstraints>
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>
                    <TableView fx:id="seancesTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="seanceIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="seanceTypeCol" prefWidth="150" text="Type" />
                            <TableColumn fx:id="seanceDateCol" prefWidth="150" text="Date" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB PROGRAMMES ============ -->
            <Tab text="ðŸ“‹ Programmes">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Programmes d'EntraÃ®nement" />

                    <HBox spacing="10">
                        <ComboBox fx:id="coachProgrammeComboBox" prefWidth="200" promptText="Coach" />
                        <TextField fx:id="titreProgrammeField" prefWidth="250" promptText="Titre du programme" />
                        <Button onAction="#handleCreerProgramme" styleClass="btn-green" text="âž• CrÃ©er Programme" />
                        <!-- ðŸ‘‡ AJOUTEZ CETTE LIGNE -->
                        <Button onAction="#handleAfficherProgrammes" styleClass="btn-blue" text="ðŸ”„ Afficher Programmes" />
                    </HBox>

                    <Separator />

                    <Label styleClass="section-subtitle" text="Ajouter un exercice" />
                    <GridPane hgap="10" vgap="10">
                        <TextField fx:id="nomExerciceField" promptText="Nom exercice" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <TextField fx:id="repetitionsField" promptText="RÃ©pÃ©titions" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <TextField fx:id="poidsField" promptText="Poids (kg)" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <TextField fx:id="dureeExerciceField" promptText="DurÃ©e (min)" GridPane.columnIndex="1" GridPane.rowIndex="1" />
   
                       <Button onAction="#handleAjouterExercice" styleClass="btn-blue" text="âž• Ajouter Exercice" GridPane.columnIndex="2" />
                  <columnConstraints>
                     <ColumnConstraints />
                     <ColumnConstraints />
                     <ColumnConstraints />
                  </columnConstraints>
                  <rowConstraints>
                     <RowConstraints />
                     <RowConstraints />
                  </rowConstraints>
                    </GridPane>

                    <TableView fx:id="programmesTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="progIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="progTitreCol" prefWidth="400" text="Titre" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            <!-- ============ TAB RÃ‰SERVATIONS ============ -->
            <Tab text="ðŸ“… RÃ©servations">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Gestion des RÃ©servations" />

                    <HBox spacing="10">
                        <ComboBox fx:id="membreReservationComboBox" prefWidth="200" promptText="Membre" />
                        <ComboBox fx:id="seanceReservationComboBox" prefWidth="300" promptText="SÃ©ance" />
                        <Button onAction="#handleCreerReservation" styleClass="btn-green" text="âž• RÃ©server" />
                    </HBox>

                    <HBox spacing="10">
                        <Button onAction="#handleConfirmerReservation" styleClass="btn-blue" text="âœ“ Confirmer" />
                        <Button onAction="#handleAnnulerReservation" styleClass="btn-red" text="âœ— Annuler" />
                    </HBox>

                    <TableView fx:id="reservationsTable" styleClass="table-modern" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="resIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="resMembreCol" prefWidth="200" text="Membre" />
                            <TableColumn fx:id="resSeanceCol" prefWidth="300" text="SÃ©ance" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>

            <!-- ============ TAB STATISTIQUES ============ -->
            <Tab text="ðŸ“Š Statistiques">
                <VBox spacing="20" style="-fx-padding: 20;">
                    <Label styleClass="section-title" text="Statistiques GÃ©nÃ©rales" />

                    <HBox spacing="20">
                        <VBox spacing="5" styleClass="stats-card">
                            <Label text="ðŸ’µ Revenu" />
                            <Label fx:id="revenuTotalLabel" styleClass="stats-value-green" text="0.00 DT" />
                        </VBox>
                        <VBox spacing="5" styleClass="stats-card">
                            <Label text="ðŸ’¸ DÃ©penses" />
                            <Label fx:id="depenseTotalLabel" styleClass="stats-value-red" text="0.00 DT" />
                        </VBox>
                        <VBox spacing="5" styleClass="stats-card">
                            <Label text="ðŸ“ˆ BÃ©nÃ©fice" />
                            <Label fx:id="beneficeNetLabel" styleClass="stats-value" text="0.00 DT" />
                        </VBox>
                        <VBox spacing="5" styleClass="stats-card">
                            <Label text="ðŸ‘¥ Membres" />
                            <Label fx:id="nombreMembresLabel" styleClass="stats-value" text="0" />
                        </VBox>
                        <VBox spacing="5" styleClass="stats-card">
                            <Label text="ðŸ‹ SÃ©ances" />
                            <Label fx:id="nombreSeancesLabel" styleClass="stats-value" text="0" />
                        </VBox>
                    </HBox>

                    <Button onAction="#handleCalculerStatistiques" styleClass="btn-blue" text="ðŸ”„ Calculer" />

                    <TextArea fx:id="statsDetailsArea" editable="false" styleClass="stats-text" VBox.vgrow="ALWAYS" />
                </VBox>
            </Tab>

        </TabPane>
    </center>

    <!-- ============ FOOTER ============ -->
    <bottom>
        <HBox styleClass="footer">
            <Label fx:id="messageLabel" text="âœ… Bienvenue !" />
        </HBox>
    </bottom>

</BorderPane>
